set.seed(2023)
test<-generate_pn(200,200,1,2,3,0.01,TRUE, "land_percentage", percetange = 60)
terra::plot(test)
set.seed(2023)
test<-generate_pn(200,200,1,2,3,0.01,TRUE, "land_percentage", percetange = 80)
terra::plot(test)
set.seed(2023)
test<-generate_pn(200,200,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
library(ALGR)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
map<-establish_pac(potential_space= r,
cell_size=1,
includsion_value = 1,
mean_field_size = 50,
sd_field_size = 25,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
map<-establish_pac(potential_space= test,
cell_size=1,
includsion_value = 1,
mean_field_size = 50,
sd_field_size = 25,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
return_by_arable_land(map)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
map<-establish_pac(potential_space= test,
cell_size=1,
includsion_value = 1,
mean_field_size = 50,
sd_field_size = 25,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
return_by_arable_land(map, borders = TRUE)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
map<-establish_pac(potential_space= test,
cell_size=1,
includsion_value = 1,
mean_field_size = 40,
sd_field_size = 25,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
return_by_arable_land(map, borders = TRUE)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
map<-establish_pac(potential_space= test,
cell_size=1,
includsion_value = 1,
mean_field_size = 20,
sd_field_size = 20,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
return_by_arable_land(map, borders = TRUE)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
map<-establish_pac(potential_space= test,
cell_size=1,
includsion_value = 1,
mean_field_size = 20,
sd_field_size = 20,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
return_by_arable_land(map, borders = TRUE)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
map<-establish_pac(potential_space= test,
cell_size=1,
includsion_value = 1,
mean_field_size = 10,
sd_field_size = 10,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
return_by_arable_land(map, borders = TRUE)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
map<-establish_pac(potential_space= test,
cell_size=1,
includsion_value = 1,
mean_field_size = 10,
sd_field_size = 10,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
return_by_arable_land(map, borders = TRUE)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
map<-establish_pac(potential_space= test,
cell_size=1,
includsion_value = 1,
mean_field_size = 10,
sd_field_size = 10,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
return_by_arable_land(map, borders = TRUE)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
map<-establish_pac(potential_space= test,
cell_size=1,
includsion_value = 1,
mean_field_size = 10,
sd_field_size = 10,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
return_by_arable_land(map, borders = TRUE)
terra::plot(test)
terra::plot(test, col = terrain.colors(4))
terra::plot(test, col = terrain.colors(3))
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
color_palette <- colorRampPalette(c("white", "blue"))
terra::plot(test, col = color_palette(2))
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
color_palette <- colorRampPalette(c("blue", "red"))
terra::plot(test, col = color_palette(2))
map<-establish_pac(potential_space= test,
cell_size=1,
includsion_value = 1,
mean_field_size = 10,
sd_field_size = 10,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
return_by_arable_land(map, borders = TRUE)
crops_matrix <- data.frame(crop = c("Wheat", "Corn", "Soybean"),
percentage = c(0.4, 0.3, 0.3),
index = c(1,2,3))  # Desired percentages
outcome<-distrubute_crops(map,crops_matrix)
return_by_crop(outcome)
crops_matrix <- data.frame(crop = c("Wheat", "Corn", "Soybean"),
percentage = c(0.4, 0.3, 0.3),
index = c(1,2,3))  # Desired percentages
outcome<-distrubute_crops(map,crops_matrix)
return_by_crop(outcome)
library(ALGR)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
color_palette <- colorRampPalette(c("blue", "red"))
terra::plot(test, col = color_palette(2))
map<-establish_pac(potential_space= test,
cell_size=1,
includsion_value = 1,
mean_field_size = 10,
sd_field_size = 10,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
return_by_arable_land(map, borders = TRUE)
crops_matrix <- data.frame(crop = c("Wheat", "Corn", "Soybean"),
percentage = c(0.4, 0.3, 0.3),
index = c(1,2,3))  # Desired percentages
outcome<-distrubute_crops(map,crops_matrix)
return_by_crop(outcome)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
color_palette <- colorRampPalette(c("blue", "red"))
terra::plot(test, col = color_palette(2))
map<-establish_pac(potential_space= test,
cell_size=1,
includsion_value = 1,
mean_field_size = 5,
sd_field_size = 5,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
return_by_arable_land(map, borders = TRUE)
crops_matrix <- data.frame(crop = c("Wheat", "Corn", "Soybean"),
percentage = c(0.4, 0.3, 0.3),
index = c(1,2,3))  # Desired percentages
outcome<-distrubute_crops(map,crops_matrix)
return_by_crop(outcome)
set.seed(2023)
test<-generate_pn(25,25,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
color_palette <- colorRampPalette(c("blue", "red"))
terra::plot(test, col = color_palette(2))
map<-establish_pac(potential_space= test,
cell_size=1,
includsion_value = 1,
mean_field_size = 5,
sd_field_size = 5,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
return_by_arable_land<-function(output_obj, borders = FALSE,  method = 1){
land = matrix(0, nrow(output_obj$map), ncol(output_obj$map))
for(i in 1:length(output_obj$field_list)){
obj<-output_obj$field_list[[i]]
row_range<-obj@location[[1]]
col_range<-obj@location[[2]]
for(k in 1:length(col_range)){
land[row_range[k], col_range[k]] <- 1
}
}
land_raster<-terra::rast(land)
terra::ext(land_raster)<-terra::ext(output_obj$map)
if(method == 1){
if(borders == FALSE){
polygons <- terra::as.polygons(land_raster, n=8,fun=function(x){x > 0}, na.rm=TRUE, digits=12, dissolve=TRUE)
terra::plot(land_raster, legend = FALSE)
terra::plot(polygons, add = TRUE, border = "black", lwd = 1)
}
if(borders == TRUE){
terra::plot(land_raster, legend = FALSE)
fields <- return_by_field(output_obj, method =2)
polygons <- terra::as.polygons(fields, n=8,fun=function(x){x > 0}, na.rm=TRUE, digits=12, dissolve=TRUE)
terra::plot(polygons, add = TRUE, border = "black", lwd = 5)
}
}
if(method == 2){
return(land_raster)
}
}
return_by_crop<-function(output_obj, method = 1){
land = matrix(0, nrow(output_obj$map), ncol(output_obj$map))
for(i in 1:length(output_obj$field_list)){
obj<-output_obj$field_list[[i]]
row_range<-obj@location[[1]]
col_range<-obj@location[[2]]
crop<-obj@crop
for(k in 1:length(col_range)){
land[row_range[k], col_range[k]] <- crop
}
}
land_raster<-terra::rast(land)
terra::ext(land_raster)<-terra::ext(output_obj$map)
if(method == 1){
terra::plot(land_raster, legend = FALSE)
fields <- return_by_field(output_obj, method =2)
polygons <- terra::as.polygons(fields, n=8,fun=function(x){x > 0}, na.rm=TRUE, digits=12, dissolve=TRUE)
terra::plot(polygons, add = TRUE, border = "black", lwd = 5)
}
if(method == 2){
return(land_raster)
}
}
return_by_arable_land(map, borders = TRUE)
crops_matrix <- data.frame(crop = c("Wheat", "Corn", "Soybean"),
percentage = c(0.4, 0.3, 0.3),
index = c(1,2,3))  # Desired percentages
outcome<-distrubute_crops(map,crops_matrix)
return_by_crop(outcome)
library(ALGR)
test<-generate_pn(200,200,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
ext(test)
terra::ext(test)
terra::ext(test)[1]
terra::ext(test)<- terra::ext(test) * 3
terra::ext(test)
terra::res(test)
test<-generate_pn(200,200,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
terra::ext(test)
terra::res(test) <- terra::res(test) * 3
terra::ext(test)
test<-generate_pn(200,200,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
terra::ext(test)
terra::res(test) <- terra::res(test) * 3
terra::ext(test)
terra::ext(test)
terra::res(test)
terra::plot(test)
test<-generate_pn(200,200,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
terra::res(test)
terra::res(test) <- terra::res(test) * 3
terra::plot(test)
test<-generate_pn(200,200,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
terra::res(test)
#terra::res(test) <- terra::res(test) * 3
terra::ext(test)<- c(0, terra::ext(test)[2]* 3, 0  )
terra::plot(test)
terra::ext(test)
#terra::res(test) <- terra::res(test) * 3
terra::ext(test)<- c(0, terra::ext(test)[2]* 3, 0  terra::ext(test)[4]* 3)
terra::ext(test)
#terra::res(test) <- terra::res(test) * 3
terra::ext(test)<- c(0, terra::ext(test)[2]* 3, 0,  terra::ext(test)[4]* 3)
terra::ext(test)
terra::plot(test)
terra::res(test)
test<-generate_pn(200,200,1,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
terra::res(test)
#terra::res(test) <- terra::res(test) * 3
terra::ext(test)<- c(0, terra::ext(test)[2]* 3, 0,  terra::ext(test)[4]* 3)
terra::res(test)
library(ALGR)
test<-generate_pn(200,200,3,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
test<-generate_pn(200,200,100,2,3,0.01,TRUE, "land_percentage", percetange = 75)
terra::plot(test)
params<-poll4pop::parameters
params
write.csv("C://Users//Eyal//Documents//PhD//tabea//params.csv")
write.csv(params, "C://Users//Eyal//Documents//PhD//tabea//params.csv")
write.csv(params$florNestInfo$floralCover, "C://Users//Eyal//Documents//PhD//tabea//floralCover.csv")
write.csv(params$florNestInfo$attract, "C://Users//Eyal//Documents//PhD//tabea//floralCover.csv")
write.csv(params$florNestInfo$floralCover, "C://Users//Eyal//Documents//PhD//tabea//floralCover.csv")
params$florNestInfo$attract
params<-poll4pop::parameters
write.csv(params$florNestInfo$floralCover, "C://Users//Eyal//Documents//PhD//tabea//floralCover.csv")
write.csv(params$florNestInfo$attract, "C://Users//Eyal//Documents//PhD//tabea//nesting_attrack.csv")
write.csv(params$poll_names, "C://Users//Eyal//Documents//PhD//tabea//poll_names.csv")
write.csv(params$lfn, "C://Users//Eyal//Documents//PhD//tabea//lc_names.csv")
usethis::use_test("establish_pac")
usethis::use_test("generate_pn")
devtools::document()
library(ALGR)
usethis::use_gitlab_ci()
use_coverage(pkg = ".", type = c("codecov"))
usethis::use_coverage(pkg = ".", type = c("codecov"))
usethis::use_coverage(type = c("codecov", "coveralls"), repo_spec = pogoyoly/ALGR)
usethis::use_coverage(type = c("codecov", "coveralls"), repo_spec = "pogoyoly/ALGR")
devtools::build_readme()
install.packages("covr")
library(covr)
codecov(token = "secrets.CODECOV_TOKEN")
codecov(token = "f5ef932d-5b1e-4b30-acc4-064e78838d61")
usethis::use_github_action("test-coverage")
usethis::use_github_action("test-coverage")
testthat::use_test("return_by_crop ")
usethis::use_test("return_by_crop")
r<-terra::rast(matrix(1, nrow=50, ncol=50))
map<-establish_pac(potential_space= r,
cell_size=1,
includsion_value = 1,
mean_field_size = 100,
sd_field_size = 25,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
r<-terra::rast(matrix(1, nrow=50, ncol=50))
map<-ALGR::establish_pac(potential_space= r,
cell_size=1,
includsion_value = 1,
mean_field_size = 100,
sd_field_size = 25,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
crops_matrix <- data.frame(crop = c("Wheat", "Corn", "Soybean"),
percentage = c(0.5, 0.5),
index = c(1,2))  # Desired percentages
r<-terra::rast(matrix(1, nrow=50, ncol=50))
map<-ALGR::establish_pac(potential_space= r,
cell_size=1,
includsion_value = 1,
mean_field_size = 100,
sd_field_size = 25,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
crops_matrix <- data.frame(crop = c("Wheat", "Corn"),
percentage = c(0.5, 0.5),
index = c(1,2))  # Desired percentages
outcome<-distrubute_crops(map,crops_matrix)
r<-terra::rast(matrix(1, nrow=50, ncol=50))
map<-ALGR::establish_pac(potential_space= r,
cell_size=1,
includsion_value = 1,
mean_field_size = 100,
sd_field_size = 25,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
crops_matrix <- data.frame(crop = c("Wheat", "Corn"),
percentage = c(0.5, 0.5),
index = c(1,2))  # Desired percentages
outcome<-ALGR::distrubute_crops(map,crops_matrix)
return_by_crop(output_obj, method = 1)
ALGR::return_by_crop(output_obj, method = 1)
ALGR::return_by_crop(output_obj, method = 2)
ALGR::return_by_crop(output_obj, method = 2)
ALGR::return_by_crop(outcome, method = 1)
raster_crop<-ALGR::return_by_crop(outcome, method = 2)
class(raster_crop)
class(raster_crop) == 'terra'
class(raster_crop) == 'SpatRaster'
r<-terra::rast(matrix(1, nrow=50, ncol=50))
map<-ALGR::establish_pac(potential_space= r,
cell_size=1,
includsion_value = 1,
mean_field_size = 100,
sd_field_size = 25,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 100)
r<-terra::rast(matrix(1, nrow=50, ncol=50))
map<-ALGR::establish_pac(potential_space= r,
cell_size=1,
includsion_value = 1,
mean_field_size = 100,
sd_field_size = 25,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 99)
r<-terra::rast(matrix(1, nrow=50, ncol=50))
map<-ALGR::establish_pac(potential_space= r,
cell_size=1,
includsion_value = 1,
mean_field_size = 100,
sd_field_size = 25,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
crops_matrix <- data.frame(crop = c("Wheat", "Corn"),
percentage = c(0.5, 0.5),
index = c(1,2))  # Desired percentages
outcome<-ALGR::distrubute_crops(map,crops_matrix)
raster_crop<-ALGR::return_by_crop(outcome, method = 2)
test_that("Test that output words", {
expect_equal(class(raster_crop) == 'SpatRaster', TRUE)
})
terra::freq(raster_crop)[, "count"][1]
terra::freq(raster_crop)[, "count"][2]
r<-terra::rast(matrix(1, nrow=50, ncol=50))
map<-ALGR::establish_pac(potential_space= r,
cell_size=1,
includsion_value = 1,
mean_field_size = 30,
sd_field_size = 25,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
crops_matrix <- data.frame(crop = c("Wheat", "Corn"),
percentage = c(0.5, 0.5),
index = c(1,2))  # Desired percentages
outcome<-ALGR::distrubute_crops(map,crops_matrix)
raster_crop<-ALGR::return_by_crop(outcome, method = 2)
terra::freq(raster_crop)[, "count"][1]
terra::freq(raster_crop)[, "count"][2]
terra::freq(raster_crop)[, "count"][2]
terra::freq(raster_crop)[, "count"][3]
terra::freq(raster_crop)[, "count"][2]
terra::freq(raster_crop)[, "count"][3]
set.seed(123)
r<-terra::rast(matrix(1, nrow=50, ncol=50))
map<-ALGR::establish_pac(potential_space= r,
cell_size=1,
includsion_value = 1,
mean_field_size = 30,
sd_field_size = 25,
distribution = "norm",
mean_shape_index = 1,
sd_shape_index = 0.3,
percent = 75)
crops_matrix <- data.frame(crop = c("Wheat", "Corn"),
percentage = c(0.5, 0.5),
index = c(1,2))  # Desired percentages
outcome<-ALGR::distrubute_crops(map,crops_matrix)
raster_crop<-ALGR::return_by_crop(outcome, method = 2)
terra::freq(raster_crop)[, "count"][2]
terra::freq(raster_crop)[, "count"][3]
